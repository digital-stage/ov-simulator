{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/tobias/Developer/digitalstage/ov-simulator/libs/useStage.tsx\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { createContext, useContext, useEffect, useReducer, useState } from \"react\";\nimport StageMemberReducer, { addStageMember } from \"../utils/reducers/StageMemberReducer\";\nimport CustomStageMemberReducer from \"../utils/reducers/CustomStageMemberReducer\";\nimport TrackReducer from \"../utils/reducers/TrackReducer\";\nimport SoundCardReducer from \"../utils/reducers/SoundCardReducer\";\nimport RemoteTrackReducer from \"../utils/reducers/RemoteTrackReducer\";\nimport { TeckosClientWithJWT } from \"teckos-client\";\nimport TrackPresetReducer from \"../utils/reducers/TrackPresetReducer\";\nimport { ServerDeviceEvents, ServerGlobalEvents, ServerStageEvents } from \"../utils/types/SocketEvents\";\nimport * as React from \"react\";\nimport CustomRemoteTrackReducer from \"../utils/reducers/CustomRemoteTrackReducer\";\nimport GroupReducer from \"../utils/reducers/GroupReducer\";\nimport CustomGroupReducer from \"../utils/reducers/CustomGroupReducer\";\nvar InitialState = {\n  soundCards: {\n    byId: {},\n    allIds: []\n  },\n  presets: {\n    byId: {},\n    bySoundCard: {},\n    allIds: []\n  },\n  tracks: {\n    byId: {},\n    bySoundCard: {},\n    byPreset: {},\n    allIds: []\n  },\n  groups: {\n    byId: {},\n    byStage: {},\n    allIds: []\n  },\n  customGroups: {\n    byId: {},\n    byGroup: {},\n    allIds: []\n  },\n  stageMembers: {\n    byId: {},\n    byGroup: {},\n    allIds: []\n  },\n  customStageMembers: {\n    byId: {},\n    byStageMember: {},\n    allIds: []\n  },\n  remoteTracks: {\n    byId: {},\n    byStageMember: {},\n    allIds: []\n  },\n  customRemoteTracks: {\n    byId: {},\n    byRemoteTrack: {},\n    allIds: []\n  }\n};\nvar Context = /*#__PURE__*/createContext(InitialState);\n_c = Context;\n\nvar StageProvider = function StageProvider(props) {\n  _s();\n\n  var children = props.children,\n      token = props.token;\n\n  var _useState = useState(),\n      socket = _useState[0],\n      setSocket = _useState[1];\n\n  var _useState2 = useState(),\n      device = _useState2[0],\n      setDevice = _useState2[1]; // OV related entities\n\n\n  var _useReducer = useReducer(SoundCardReducer, InitialState.soundCards),\n      soundCards = _useReducer[0],\n      dispatchSoundCard = _useReducer[1];\n\n  var _useReducer2 = useReducer(TrackPresetReducer, InitialState.presets),\n      presets = _useReducer2[0],\n      dispatchPresets = _useReducer2[1];\n\n  var _useReducer3 = useReducer(TrackReducer, InitialState.tracks),\n      tracks = _useReducer3[0],\n      dispatchTracks = _useReducer3[1]; // Digital stage related entities\n\n\n  var _useReducer4 = useReducer(GroupReducer, InitialState.groups),\n      groups = _useReducer4[0],\n      dispatchGroups = _useReducer4[1];\n\n  var _useReducer5 = useReducer(CustomGroupReducer, InitialState.customGroups),\n      customGroups = _useReducer5[0],\n      dispatchCustomGroups = _useReducer5[1];\n\n  var _useReducer6 = useReducer(StageMemberReducer, InitialState.stageMembers),\n      stageMembers = _useReducer6[0],\n      dispatchStageMembers = _useReducer6[1];\n\n  var _useReducer7 = useReducer(CustomStageMemberReducer, InitialState.customStageMembers),\n      customStageMembers = _useReducer7[0],\n      dispatchCustomStageMembers = _useReducer7[1];\n\n  var _useReducer8 = useReducer(RemoteTrackReducer, InitialState.remoteTracks),\n      remoteTracks = _useReducer8[0],\n      dispatchRemoteTracks = _useReducer8[1];\n\n  var _useReducer9 = useReducer(CustomRemoteTrackReducer, InitialState.customRemoteTracks),\n      customRemoteTracks = _useReducer9[0],\n      dispatchCustomRemoteTracks = _useReducer9[1];\n\n  useEffect(function () {\n    // Got token, register self as device\n    var initialDevice = {\n      name: 'OV Simulator',\n      canOv: true,\n      canAudio: true,\n      sendAudio: true,\n      receiveAudio: true,\n      soundCardIds: []\n    };\n    var nSocket = new TeckosClientWithJWT(process.env.NEXT_PUBLIC_API_URL, {\n      reconnection: true,\n      timeout: 1000\n    }, token, {\n      device: initialDevice\n    });\n    nSocket.on(\"connect\", function () {\n      console.log(\"connected!\");\n    });\n    nSocket.on(ServerDeviceEvents.LOCAL_DEVICE_READY, function (device) {\n      setDevice(device);\n    });\n    nSocket.on(ServerDeviceEvents.SOUND_CARD_ADDED, function (payload) {\n      return dispatchSoundCard({\n        type: ServerDeviceEvents.SOUND_CARD_ADDED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerDeviceEvents.SOUND_CARD_CHANGED, function (payload) {\n      return dispatchSoundCard({\n        type: ServerDeviceEvents.SOUND_CARD_CHANGED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerDeviceEvents.SOUND_CARD_REMOVED, function (payload) {\n      return dispatchSoundCard({\n        type: ServerDeviceEvents.SOUND_CARD_REMOVED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerDeviceEvents.TRACK_PRESET_ADDED, function (payload) {\n      return dispatchPresets({\n        type: ServerDeviceEvents.TRACK_PRESET_ADDED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerDeviceEvents.TRACK_PRESET_CHANGED, function (payload) {\n      return dispatchPresets({\n        type: ServerDeviceEvents.TRACK_PRESET_CHANGED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerDeviceEvents.TRACK_PRESET_REMOVED, function (payload) {\n      return dispatchPresets({\n        type: ServerDeviceEvents.TRACK_PRESET_REMOVED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerDeviceEvents.TRACK_ADDED, function (payload) {\n      return dispatchTracks({\n        type: ServerDeviceEvents.TRACK_ADDED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerDeviceEvents.TRACK_CHANGED, function (payload) {\n      return dispatchTracks({\n        type: ServerDeviceEvents.TRACK_CHANGED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerDeviceEvents.TRACK_REMOVED, function (payload) {\n      return dispatchTracks({\n        type: ServerDeviceEvents.TRACK_REMOVED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerStageEvents.GROUP_ADDED, function (payload) {\n      return dispatchGroups({\n        type: ServerStageEvents.GROUP_ADDED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerStageEvents.GROUP_CHANGED, function (payload) {\n      return dispatchGroups({\n        type: ServerStageEvents.GROUP_CHANGED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerStageEvents.GROUP_REMOVED, function (payload) {\n      return dispatchGroups({\n        type: ServerStageEvents.GROUP_REMOVED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerStageEvents.CUSTOM_GROUP_ADDED, function (payload) {\n      return dispatchCustomGroups({\n        type: ServerStageEvents.CUSTOM_GROUP_ADDED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerStageEvents.CUSTOM_GROUP_CHANGED, function (payload) {\n      return dispatchCustomGroups({\n        type: ServerStageEvents.CUSTOM_GROUP_CHANGED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerStageEvents.CUSTOM_GROUP_REMOVED, function (payload) {\n      return dispatchCustomGroups({\n        type: ServerStageEvents.CUSTOM_GROUP_REMOVED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerStageEvents.STAGE_MEMBER_ADDED, function (payload) {\n      return dispatchStageMembers({\n        type: ServerStageEvents.STAGE_MEMBER_ADDED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerStageEvents.STAGE_MEMBER_CHANGED, function (payload) {\n      return dispatchStageMembers({\n        type: ServerStageEvents.STAGE_MEMBER_CHANGED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerStageEvents.STAGE_MEMBER_REMOVED, function (payload) {\n      return dispatchStageMembers({\n        type: ServerStageEvents.STAGE_MEMBER_REMOVED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerStageEvents.CUSTOM_STAGE_MEMBER_ADDED, function (payload) {\n      return dispatchCustomStageMembers({\n        type: ServerStageEvents.CUSTOM_STAGE_MEMBER_ADDED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerStageEvents.CUSTOM_STAGE_MEMBER_CHANGED, function (payload) {\n      return dispatchCustomStageMembers({\n        type: ServerStageEvents.CUSTOM_STAGE_MEMBER_CHANGED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerStageEvents.CUSTOM_STAGE_MEMBER_REMOVED, function (payload) {\n      return dispatchCustomStageMembers({\n        type: ServerStageEvents.CUSTOM_STAGE_MEMBER_REMOVED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerStageEvents.STAGE_MEMBER_OV_ADDED, function (payload) {\n      return dispatchRemoteTracks({\n        type: ServerStageEvents.STAGE_MEMBER_OV_ADDED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerStageEvents.STAGE_MEMBER_OV_CHANGED, function (payload) {\n      return dispatchRemoteTracks({\n        type: ServerStageEvents.STAGE_MEMBER_OV_CHANGED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerStageEvents.STAGE_MEMBER_OV_REMOVED, function (payload) {\n      return dispatchRemoteTracks({\n        type: ServerStageEvents.STAGE_MEMBER_OV_REMOVED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerStageEvents.CUSTOM_STAGE_MEMBER_OV_ADDED, function (payload) {\n      return dispatchCustomRemoteTracks({\n        type: ServerStageEvents.CUSTOM_STAGE_MEMBER_OV_ADDED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerStageEvents.CUSTOM_STAGE_MEMBER_OV_CHANGED, function (payload) {\n      return dispatchCustomRemoteTracks({\n        type: ServerStageEvents.CUSTOM_STAGE_MEMBER_OV_CHANGED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerStageEvents.CUSTOM_STAGE_MEMBER_OV_REMOVED, function (payload) {\n      return dispatchCustomRemoteTracks({\n        type: ServerStageEvents.CUSTOM_STAGE_MEMBER_OV_REMOVED,\n        payload: payload\n      });\n    });\n    nSocket.on(ServerGlobalEvents.STAGE_JOINED, function (payload) {\n      // Handle package with many stage related entities\n      payload.stageMembers.forEach(function (stageMember) {\n        return dispatchStageMembers(addStageMember(stageMember));\n      });\n      payload.customStageMembers.forEach(function (customStageMember) {\n        return dispatchCustomStageMembers({\n          type: ServerStageEvents.CUSTOM_STAGE_MEMBER_ADDED,\n          payload: customStageMember\n        });\n      });\n      payload.ovTracks.forEach(function (ovTrack) {\n        return dispatchRemoteTracks({\n          type: ServerStageEvents.STAGE_MEMBER_OV_ADDED,\n          payload: ovTrack\n        });\n      });\n      payload.customOvTracks.forEach(function (customRemoteTrack) {\n        return dispatchCustomRemoteTracks({\n          type: ServerStageEvents.CUSTOM_STAGE_MEMBER_OV_ADDED,\n          payload: customRemoteTrack\n        });\n      });\n    });\n    nSocket.connect();\n    setSocket(nSocket);\n  }, [token]);\n  return /*#__PURE__*/_jsxDEV(Context.Provider, {\n    value: {\n      device: device,\n      soundCards: soundCards,\n      presets: presets,\n      tracks: tracks,\n      groups: groups,\n      customGroups: customGroups,\n      stageMembers: stageMembers,\n      customStageMembers: customStageMembers,\n      remoteTracks: remoteTracks,\n      customRemoteTracks: customRemoteTracks\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 286,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(StageProvider, \"5N1O1u9oTFe0XI9DMsUPicgEJOU=\");\n\n_c2 = StageProvider;\nexport { StageProvider };\n\nvar useStage = function useStage() {\n  _s2();\n\n  return useContext(Context);\n};\n\n_s2(useStage, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport default useStage;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Context\");\n$RefreshReg$(_c2, \"StageProvider\");","map":{"version":3,"sources":["/Users/tobias/Developer/digitalstage/ov-simulator/libs/useStage.tsx"],"names":["createContext","useContext","useEffect","useReducer","useState","StageMemberReducer","addStageMember","CustomStageMemberReducer","TrackReducer","SoundCardReducer","RemoteTrackReducer","TeckosClientWithJWT","TrackPresetReducer","ServerDeviceEvents","ServerGlobalEvents","ServerStageEvents","React","CustomRemoteTrackReducer","GroupReducer","CustomGroupReducer","InitialState","soundCards","byId","allIds","presets","bySoundCard","tracks","byPreset","groups","byStage","customGroups","byGroup","stageMembers","customStageMembers","byStageMember","remoteTracks","customRemoteTracks","byRemoteTrack","Context","StageProvider","props","children","token","socket","setSocket","device","setDevice","dispatchSoundCard","dispatchPresets","dispatchTracks","dispatchGroups","dispatchCustomGroups","dispatchStageMembers","dispatchCustomStageMembers","dispatchRemoteTracks","dispatchCustomRemoteTracks","initialDevice","name","canOv","canAudio","sendAudio","receiveAudio","soundCardIds","nSocket","process","env","NEXT_PUBLIC_API_URL","reconnection","timeout","on","console","log","LOCAL_DEVICE_READY","SOUND_CARD_ADDED","payload","type","SOUND_CARD_CHANGED","SOUND_CARD_REMOVED","TRACK_PRESET_ADDED","TRACK_PRESET_CHANGED","TRACK_PRESET_REMOVED","TRACK_ADDED","TRACK_CHANGED","TRACK_REMOVED","GROUP_ADDED","GROUP_CHANGED","GROUP_REMOVED","CUSTOM_GROUP_ADDED","CUSTOM_GROUP_CHANGED","CUSTOM_GROUP_REMOVED","STAGE_MEMBER_ADDED","STAGE_MEMBER_CHANGED","STAGE_MEMBER_REMOVED","CUSTOM_STAGE_MEMBER_ADDED","CUSTOM_STAGE_MEMBER_CHANGED","CUSTOM_STAGE_MEMBER_REMOVED","STAGE_MEMBER_OV_ADDED","STAGE_MEMBER_OV_CHANGED","STAGE_MEMBER_OV_REMOVED","CUSTOM_STAGE_MEMBER_OV_ADDED","CUSTOM_STAGE_MEMBER_OV_CHANGED","CUSTOM_STAGE_MEMBER_OV_REMOVED","STAGE_JOINED","forEach","stageMember","customStageMember","ovTracks","ovTrack","customOvTracks","customRemoteTrack","connect","useStage"],"mappings":"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","sourcesContent":["import {createContext, useContext, useEffect, useReducer, useState} from \"react\";\nimport StageMemberReducer, {\n    addStageMember,\n    StageMembers\n} from \"../utils/reducers/StageMemberReducer\";\nimport CustomStageMemberReducer, {CustomStageMembers} from \"../utils/reducers/CustomStageMemberReducer\";\nimport TrackReducer, {Tracks} from \"../utils/reducers/TrackReducer\";\nimport SoundCardReducer, {SoundCards} from \"../utils/reducers/SoundCardReducer\";\nimport RemoteTrackReducer, {RemoteTracks} from \"../utils/reducers/RemoteTrackReducer\";\nimport {ITeckosClient, TeckosClientWithJWT} from \"teckos-client\";\nimport {Device} from \"../utils/types/Device\";\nimport TrackPresetReducer, {TrackPresets} from \"../utils/reducers/TrackPresetReducer\";\nimport {ServerDeviceEvents, ServerGlobalEvents, ServerStageEvents} from \"../utils/types/SocketEvents\";\nimport {InitialStagePackage} from \"../utils/types/InitialStagePackage\";\nimport * as React from \"react\";\nimport {StageMemberOvTrack} from \"../utils/types/StageMemberOvTrack\";\nimport CustomRemoteTrackReducer, {CustomRemoteTracks} from \"../utils/reducers/CustomRemoteTrackReducer\";\nimport {CustomRemoteOvTrack} from \"../utils/types/CustomRemoteOvTrack\";\nimport {SoundCard} from \"../utils/types/SoundCard\";\nimport {Track} from \"../utils/types/Track\";\nimport {TrackPreset} from \"../utils/types/TrackPreset\";\nimport {StageMember} from \"../utils/types/StageMember\";\nimport {CustomStageMember} from \"../utils/types/CustomStageMember\";\nimport GroupReducer, {Groups} from \"../utils/reducers/GroupReducer\";\nimport CustomGroupReducer, {CustomGroups} from \"../utils/reducers/CustomGroupReducer\";\nimport {Group} from \"../utils/types/Group\";\nimport {CustomGroup} from \"../utils/types/CustomGroup\";\n\ninterface StageContext {\n    device?: Device;\n    soundCards: SoundCards;\n    presets: TrackPresets;\n    tracks: Tracks;\n\n    groups: Groups;\n    customGroups: CustomGroups;\n    stageMembers: StageMembers;\n    customStageMembers: CustomStageMembers;\n\n    remoteTracks: RemoteTracks;\n    customRemoteTracks: CustomRemoteTracks;\n}\n\nconst InitialState: StageContext = {\n    soundCards: {\n        byId: {},\n        allIds: []\n    },\n    presets: {\n        byId: {},\n        bySoundCard: {},\n        allIds: []\n    },\n    tracks: {\n        byId: {},\n        bySoundCard: {},\n        byPreset: {},\n        allIds: []\n    },\n    groups: {\n        byId: {},\n        byStage: {},\n        allIds: []\n    },\n    customGroups: {\n        byId: {},\n        byGroup: {},\n        allIds: []\n    },\n    stageMembers: {\n        byId: {},\n        byGroup: {},\n        allIds: []\n    },\n    customStageMembers: {\n        byId: {},\n        byStageMember: {},\n        allIds: []\n    },\n    remoteTracks: {\n        byId: {},\n        byStageMember: {},\n        allIds: []\n    },\n    customRemoteTracks: {\n        byId: {},\n        byRemoteTrack: {},\n        allIds: []\n    }\n}\n\nconst Context = createContext<StageContext>(InitialState);\n\nconst StageProvider = (props: {\n    children: React.ReactNode,\n    token?: string\n}) => {\n    const {children, token} = props;\n    const [socket, setSocket] = useState<ITeckosClient>();\n    const [device, setDevice] = useState<Device>();\n\n    // OV related entities\n    const [soundCards, dispatchSoundCard] = useReducer(SoundCardReducer, InitialState.soundCards);\n    const [presets, dispatchPresets] = useReducer(TrackPresetReducer, InitialState.presets);\n    const [tracks, dispatchTracks] = useReducer(TrackReducer, InitialState.tracks);\n\n    // Digital stage related entities\n    const [groups, dispatchGroups] = useReducer(GroupReducer, InitialState.groups);\n    const [customGroups, dispatchCustomGroups] = useReducer(CustomGroupReducer, InitialState.customGroups);\n    const [stageMembers, dispatchStageMembers] = useReducer(StageMemberReducer, InitialState.stageMembers);\n    const [customStageMembers, dispatchCustomStageMembers] = useReducer(CustomStageMemberReducer, InitialState.customStageMembers);\n    const [remoteTracks, dispatchRemoteTracks] = useReducer(RemoteTrackReducer, InitialState.remoteTracks);\n    const [customRemoteTracks, dispatchCustomRemoteTracks] = useReducer(CustomRemoteTrackReducer, InitialState.customRemoteTracks);\n\n    useEffect(() => {\n        // Got token, register self as device\n        const initialDevice: Partial<Device> = {\n            name: 'OV Simulator',\n            canOv: true,\n            canAudio: true,\n            sendAudio: true,\n            receiveAudio: true,\n            soundCardIds: [],\n        };\n\n        const nSocket = new TeckosClientWithJWT(\n            process.env.NEXT_PUBLIC_API_URL,\n            {\n                reconnection: true,\n                timeout: 1000,\n            },\n            token,\n            {\n                device: initialDevice,\n            }\n        );\n\n        nSocket.on(\"connect\", () => {\n            console.log(\"connected!\")\n        });\n\n        nSocket.on(ServerDeviceEvents.LOCAL_DEVICE_READY, (device: Device) => {\n            setDevice(device);\n        })\n\n        nSocket.on(ServerDeviceEvents.SOUND_CARD_ADDED, (payload: SoundCard) => dispatchSoundCard({\n            type: ServerDeviceEvents.SOUND_CARD_ADDED,\n            payload: payload\n        }));\n        nSocket.on(ServerDeviceEvents.SOUND_CARD_CHANGED, (payload: SoundCard) => dispatchSoundCard({\n            type: ServerDeviceEvents.SOUND_CARD_CHANGED,\n            payload: payload\n        }));\n        nSocket.on(ServerDeviceEvents.SOUND_CARD_REMOVED, (payload: string) => dispatchSoundCard({\n            type: ServerDeviceEvents.SOUND_CARD_REMOVED,\n            payload: payload\n        }));\n\n        nSocket.on(ServerDeviceEvents.TRACK_PRESET_ADDED, (payload: TrackPreset) => dispatchPresets({\n            type: ServerDeviceEvents.TRACK_PRESET_ADDED,\n            payload: payload\n        }));\n        nSocket.on(ServerDeviceEvents.TRACK_PRESET_CHANGED, (payload: TrackPreset) => dispatchPresets({\n            type: ServerDeviceEvents.TRACK_PRESET_CHANGED,\n            payload: payload\n        }));\n        nSocket.on(ServerDeviceEvents.TRACK_PRESET_REMOVED, (payload: string) => dispatchPresets({\n            type: ServerDeviceEvents.TRACK_PRESET_REMOVED,\n            payload: payload\n        }));\n\n        nSocket.on(ServerDeviceEvents.TRACK_ADDED, (payload: Track) => dispatchTracks({\n            type: ServerDeviceEvents.TRACK_ADDED,\n            payload: payload\n        }));\n        nSocket.on(ServerDeviceEvents.TRACK_CHANGED, (payload: Track) => dispatchTracks({\n            type: ServerDeviceEvents.TRACK_CHANGED,\n            payload: payload\n        }));\n        nSocket.on(ServerDeviceEvents.TRACK_REMOVED, (payload: string) => dispatchTracks({\n            type: ServerDeviceEvents.TRACK_REMOVED,\n            payload: payload\n        }));\n\n        nSocket.on(ServerStageEvents.GROUP_ADDED, (payload: Group) => dispatchGroups({\n            type: ServerStageEvents.GROUP_ADDED,\n            payload: payload\n        }));\n        nSocket.on(ServerStageEvents.GROUP_CHANGED, (payload: Group) => dispatchGroups({\n            type: ServerStageEvents.GROUP_CHANGED,\n            payload: payload\n        }));\n        nSocket.on(ServerStageEvents.GROUP_REMOVED, (payload: string) => dispatchGroups({\n            type: ServerStageEvents.GROUP_REMOVED,\n            payload: payload\n        }));\n\n        nSocket.on(ServerStageEvents.CUSTOM_GROUP_ADDED, (payload: CustomGroup) => dispatchCustomGroups({\n            type: ServerStageEvents.CUSTOM_GROUP_ADDED,\n            payload: payload\n        }));\n        nSocket.on(ServerStageEvents.CUSTOM_GROUP_CHANGED, (payload: CustomGroup) => dispatchCustomGroups({\n            type: ServerStageEvents.CUSTOM_GROUP_CHANGED,\n            payload: payload\n        }));\n        nSocket.on(ServerStageEvents.CUSTOM_GROUP_REMOVED, (payload: string) => dispatchCustomGroups({\n            type: ServerStageEvents.CUSTOM_GROUP_REMOVED,\n            payload: payload\n        }));\n\n        nSocket.on(ServerStageEvents.STAGE_MEMBER_ADDED, (payload: StageMember) => dispatchStageMembers({\n            type: ServerStageEvents.STAGE_MEMBER_ADDED,\n            payload: payload\n        }));\n        nSocket.on(ServerStageEvents.STAGE_MEMBER_CHANGED, (payload: StageMember) => dispatchStageMembers({\n            type: ServerStageEvents.STAGE_MEMBER_CHANGED,\n            payload: payload\n        }));\n        nSocket.on(ServerStageEvents.STAGE_MEMBER_REMOVED, (payload: string) => dispatchStageMembers({\n            type: ServerStageEvents.STAGE_MEMBER_REMOVED,\n            payload: payload\n        }));\n\n        nSocket.on(ServerStageEvents.CUSTOM_STAGE_MEMBER_ADDED, (payload: CustomStageMember) => dispatchCustomStageMembers({\n            type: ServerStageEvents.CUSTOM_STAGE_MEMBER_ADDED,\n            payload: payload\n        }));\n        nSocket.on(ServerStageEvents.CUSTOM_STAGE_MEMBER_CHANGED, (payload: CustomStageMember) => dispatchCustomStageMembers({\n            type: ServerStageEvents.CUSTOM_STAGE_MEMBER_CHANGED,\n            payload: payload\n        }));\n        nSocket.on(ServerStageEvents.CUSTOM_STAGE_MEMBER_REMOVED, (payload: string) => dispatchCustomStageMembers({\n            type: ServerStageEvents.CUSTOM_STAGE_MEMBER_REMOVED,\n            payload: payload\n        }));\n\n        nSocket.on(ServerStageEvents.STAGE_MEMBER_OV_ADDED, (payload: StageMemberOvTrack) => dispatchRemoteTracks({\n            type: ServerStageEvents.STAGE_MEMBER_OV_ADDED,\n            payload: payload\n        }));\n        nSocket.on(ServerStageEvents.STAGE_MEMBER_OV_CHANGED, (payload: StageMemberOvTrack) => dispatchRemoteTracks({\n            type: ServerStageEvents.STAGE_MEMBER_OV_CHANGED,\n            payload: payload\n        }));\n        nSocket.on(ServerStageEvents.STAGE_MEMBER_OV_REMOVED, (payload: string) => dispatchRemoteTracks({\n            type: ServerStageEvents.STAGE_MEMBER_OV_REMOVED,\n            payload: payload\n        }));\n\n        nSocket.on(ServerStageEvents.CUSTOM_STAGE_MEMBER_OV_ADDED, (payload: CustomRemoteOvTrack) => dispatchCustomRemoteTracks({\n            type: ServerStageEvents.CUSTOM_STAGE_MEMBER_OV_ADDED,\n            payload: payload\n        }));\n        nSocket.on(ServerStageEvents.CUSTOM_STAGE_MEMBER_OV_CHANGED, (payload: CustomRemoteOvTrack) => dispatchCustomRemoteTracks({\n            type: ServerStageEvents.CUSTOM_STAGE_MEMBER_OV_CHANGED,\n            payload: payload\n        }));\n        nSocket.on(ServerStageEvents.CUSTOM_STAGE_MEMBER_OV_REMOVED, (payload: string) => dispatchCustomRemoteTracks({\n            type: ServerStageEvents.CUSTOM_STAGE_MEMBER_OV_REMOVED,\n            payload: payload\n        }));\n\n        nSocket.on(ServerGlobalEvents.STAGE_JOINED, (payload: InitialStagePackage) => {\n            // Handle package with many stage related entities\n            payload.stageMembers.forEach(stageMember => dispatchStageMembers(addStageMember(stageMember)));\n            payload.customStageMembers.forEach(customStageMember => dispatchCustomStageMembers({\n                type: ServerStageEvents.CUSTOM_STAGE_MEMBER_ADDED,\n                payload: customStageMember\n            }));\n            payload.ovTracks.forEach(ovTrack => dispatchRemoteTracks({\n                type: ServerStageEvents.STAGE_MEMBER_OV_ADDED,\n                payload: ovTrack\n            }));\n            payload.customOvTracks.forEach(customRemoteTrack => dispatchCustomRemoteTracks({\n                type: ServerStageEvents.CUSTOM_STAGE_MEMBER_OV_ADDED,\n                payload: customRemoteTrack\n            }));\n        });\n\n        nSocket.connect();\n\n        setSocket(nSocket);\n    }, [token])\n\n    return (\n        <Context.Provider value={{\n            device,\n            soundCards,\n            presets,\n            tracks,\n            groups,\n            customGroups,\n            stageMembers,\n            customStageMembers,\n            remoteTracks,\n            customRemoteTracks\n        }}>\n            {children}\n        </Context.Provider>\n    )\n};\n\nexport {\n    StageProvider\n}\n\nconst useStage = (): StageContext => useContext<StageContext>(Context);\nexport default useStage;\n"]},"metadata":{},"sourceType":"module"}